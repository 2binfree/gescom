{% extends('@Gescom/base.html.twig') %}

{% block body %}
    <div class="row margeTop valign-wrapper">
        {% if is_granted('ROLE_ADMIN') %}
            <div class="col s1 offset-s1">
                <a class="btn-floating btn-large waves-effect waves-light red" href="{{ path("add_supplier") }}">
                    <i class="material-icons">add</i>
                </a>
            </div>
        {% endif %}
        <div class="col s3 left-align">
            <h4>Fournisseurs</h4>
        </div>
        <div class="col s7 left-align">
            {% include('@Gescom/Partials/paginator.html.twig') %}
        </div>
    </div>
    <div class="row">
        <div class="col s10 offset-s1">
            <div class="row">
                {{ form_start(form) }}
                <div class="col s2">{{ form_label(form.name) }}{{ form_widget(form.name, {"value": filter.name } ) }}</div>
                <div class="col s2">{{ form_label(form.postalCode) }}{{ form_widget(form.postalCode, {"value": filter.postalCode } ) }}</div>
                <div class="col s2">{{ form_label(form.town) }}{{ form_widget(form.town, {"value": filter.town } ) }}</div>
                <div class="col s2">{{ form_label(form.deliveryTime) }}{{ form_widget(form.deliveryTime, {"value": filter.deliveryTime } ) }}</div>
                <div class="col s2">{{ form_label(form.score) }}{{ form_widget(form.score, {"value": filter.score } ) }}</div>
                <div class="col s2 valign-wrapper">
                    <button class="btn waves-effect waves-light" type="submit" name="action">Filtrer
                        <i class="material-icons right">send</i>
                    </button>
                </div>
                {{ form_end(form) }}
            </div>
            <table class="striped responsive-table">
                <thead>
                <tr>
                    <th>Nom</th>
                    <th>Code postal</th>
                    <th>Ville</th>
                    <th>DÃ©lai de livraison</th>
                    <th>Score</th>
                    {% if is_granted('ROLE_ADMIN') %}
                        <th></th>
                        <th></th>
                    {% endif %}
                </tr>
                </thead>
                <tbody>
                {% for supplier in data %}
                    <tr>
                        <td>{{ supplier.name }}</td>
                        <td>{{ supplier.postalCode }}</td>
                        <td>{{ supplier.town }}</td>
                        <td>{{ supplier.deliveryTime }}</td>
                        <td>{{ supplier.score }}</td>
                        {% if is_granted('ROLE_ADMIN') %}
                            <td>
                                <a href="{{ path('edit_supplier', {'supplier': supplier.id}) }}">
                                    <i class="small material-icons blue-text">mode_edit</i>
                                </a>
                            </td>
                            <td>
                                <a href="#" class="deleteButton" data-id="{{ supplier.id }}">
                                    <i class="small material-icons red-text modal-close">delete</i>
                                </a>
                            </td>
                        {% endif %}
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
    <div class="row center-align">
        <div class="col s8 offset-s2">
            {% include('@Gescom/Partials/paginator.html.twig') %}
        </div>
    </div>
    {% include('@Gescom/Modals/modalDeletion.html.twig') %}

{% endblock %}